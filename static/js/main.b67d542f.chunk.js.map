{"version":3,"sources":["ducks/data.js","utils/strings.js","components/FretBoard.js","utils/useEventListener.js","components/KeyListener.js","components/Sections.js","components/AppInfo.js","components/Page.js","ducks/rootReducer.js","ducks/store.js","App.js","reportWebVitals.js","index.js"],"names":["getDefaultState","sections","preRows","Array","fill","buffer","keyHold","isMultipleOn","SET_BUFFER","SET_KEY_HOLD","SET_IS_MULTIPLE_ON","UNDO","ADD_LINE","setBuffer","payload","type","setIsMultipleOn","addLine","undo","selectPreRows","state","data","selectBuffer","selectIsMultipleOn","strings","FretBoard","useSelector","dispatch","useDispatch","style","userSelect","getFreatBoardTable","string","fret","newBuffer","onClickHandler","fretBoard","i","rows","j","key","push","onClick","className","includes","useEventListener","eventName","handler","element","window","savedHandler","useRef","useEffect","current","addEventListener","eventListener","event","removeEventListener","KeyListener","e","find","Sections","display","join","map","r","marginLeft","color","fontWeight","float","width","textAlign","AppInfo","href","target","rel","Page","rootReducer","combineReducers","row","substring","length","line","maxFret","reduce","maximum","Math","max","empty","newPreRows","store","createStore","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b67d542f.chunk.js","sourcesContent":["const getDefaultState = () => ({\r\n  sections: [],\r\n  preRows: Array(6).fill(\"\"),\r\n  buffer: Array(6).fill(null),\r\n  keyHold: null,\r\n  isMultipleOn: false,\r\n});\r\nconst SET_BUFFER = \"data SET_BUFFER\";\r\nconst SET_KEY_HOLD = \"data SET_KEY_HOLD\";\r\nconst SET_IS_MULTIPLE_ON = \"data SET_IS_MULTIPLE_ON\";\r\nconst UNDO = \"data UNDO\";\r\nconst ADD_LINE = \"data ADD_LINE\";\r\n\r\nexport default function data(state = getDefaultState(), { type, payload }) {\r\n  switch (type) {\r\n    case SET_BUFFER:\r\n      return { ...state, buffer: payload };\r\n    case SET_KEY_HOLD:\r\n      return { ...state, keyHold: payload };\r\n    case SET_IS_MULTIPLE_ON:\r\n      return { ...state, isMultipleOn: payload };\r\n    case UNDO:\r\n      return {\r\n        ...state,\r\n        preRows: state.preRows.map((row) => row.substring(0, row.length - 1)),\r\n      };\r\n    case ADD_LINE:\r\n      const line = payload;\r\n      let maxFret = line.reduce((maximum, fret) => {\r\n        return Math.max(maximum, fret);\r\n      }, null);\r\n      let empty = maxFret > 9 ? \"--\" : \"-\";\r\n      const newPreRows = [];\r\n      for (let i = 0; i < 6; i++) {\r\n        newPreRows.push(\r\n          (state.preRows[i] += \"-\" + (line[i] !== null ? line[i] : empty))\r\n        );\r\n      }\r\n      return {\r\n        ...state,\r\n        preRows: newPreRows,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function setBuffer(payload) {\r\n  return { type: SET_BUFFER, payload };\r\n}\r\n\r\nexport function setKeyHold(payload) {\r\n  return { type: SET_KEY_HOLD, payload };\r\n}\r\n\r\nexport function setIsMultipleOn(payload) {\r\n  return { type: SET_IS_MULTIPLE_ON, payload };\r\n}\r\n\r\nexport function addLine(payload) {\r\n  return { type: ADD_LINE, payload };\r\n}\r\n\r\nexport function undo() {\r\n  return { type: UNDO };\r\n}\r\n\r\nexport const selectSections = (state) => state.data.sections;\r\nexport const selectPreRows = (state) => state.data.preRows;\r\nexport const selectBuffer = (state) => state.data.buffer;\r\nexport const selectKeyHold = (state) => state.data.keyHold;\r\nexport const selectIsMultipleOn = (state) => state.data.isMultipleOn;\r\n","export const strings = [\"e\", \"B\", \"G\", \"D\", \"A\", \"E\"];\r\n","import { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  addLine,\r\n  selectBuffer,\r\n  selectIsMultipleOn,\r\n  setBuffer,\r\n} from \"../ducks/data\";\r\nimport { strings } from \"../utils/strings\";\r\n\r\nexport default function FretBoard() {\r\n  const buffer = useSelector(selectBuffer);\r\n  const dispatch = useDispatch();\r\n  const isMultipleOn = useSelector(selectIsMultipleOn);\r\n\r\n  function onClick(string, fret) {\r\n    const newBuffer = isMultipleOn ? [...buffer] : Array(6).fill(null);\r\n    newBuffer[string] = fret;\r\n\r\n    if (isMultipleOn) {\r\n      dispatch(setBuffer(newBuffer));\r\n    } else {\r\n      dispatch(addLine(newBuffer));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <table style={{ userSelect: \"none\" }}>\r\n      <tbody>{getFreatBoardTable(onClick)}</tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nfunction getFreatBoardTable(onClickHandler){\r\n    const fretBoard = [];\r\n    for (let i = 0; i < 6; i++) {\r\n      const rows = [];\r\n      for (let j = 0; j <= 24; j++) {\r\n        const key = strings[i] + j;\r\n        rows.push(\r\n          <td\r\n            key={key}\r\n            onClick={() => onClickHandler(i, j)}\r\n            className={\r\n              [3, 5, 7, 9, 12, 15, 17, 19, 21].includes(j) ? \"gray-cell\" : \"\"\r\n            }\r\n          >\r\n            {key}\r\n          </td>\r\n        );\r\n      }\r\n  \r\n      fretBoard.push(<tr key={i}>{rows}</tr>);\r\n    }\r\n    return fretBoard;\r\n}\r\n","import { useEffect, useRef } from \"react\";\r\n\r\n// Hook\r\nexport function useEventListener(eventName, handler, element = window){\r\n    // Create a ref that stores handler\r\n    const savedHandler = useRef();\r\n  \r\n    // Update ref.current value if handler changes.\r\n    // This allows our effect below to always get latest handler ...\r\n    // ... without us needing to pass it in effect deps array ...\r\n    // ... and potentially cause effect to re-run every render.\r\n    useEffect(() => {\r\n      savedHandler.current = handler;\r\n    }, [handler]);\r\n  \r\n    useEffect(\r\n      () => {\r\n        // Make sure element supports addEventListener\r\n        // On \r\n        const isSupported = element && element.addEventListener;\r\n        if (!isSupported) return;\r\n  \r\n        // Create event listener that calls handler function stored in ref\r\n        const eventListener = event => savedHandler.current(event);\r\n  \r\n        // Add event listener\r\n        element.addEventListener(eventName, eventListener);\r\n  \r\n        // Remove event listener on cleanup\r\n        return () => {\r\n          element.removeEventListener(eventName, eventListener);\r\n        };\r\n      },\r\n      [eventName, element] // Re-run if eventName or element changes\r\n    );\r\n  };","import { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n    addLine,\r\n  selectBuffer,\r\n  setBuffer,\r\n  setIsMultipleOn,\r\n  undo,\r\n} from \"../ducks/data\";\r\n\r\nimport { useEventListener } from \"../utils/useEventListener\";\r\n\r\nexport function KeyListener() {\r\n  const dispatch = useDispatch();\r\n  const buffer = useSelector(selectBuffer);\r\n\r\n  function onBackspace() {\r\n    dispatch(undo());\r\n  }\r\n\r\n  useEventListener(\"keydown\", (e) => {\r\n    if (e.key === \"Shift\") {\r\n      dispatch(setIsMultipleOn(true));\r\n    }\r\n  });\r\n\r\n  useEventListener(\"keyup\", (e) => {\r\n    if (e.key === \"Backspace\") onBackspace();\r\n    if (e.key === \"Shift\") {\r\n      dispatch(setIsMultipleOn(false));\r\n      if (buffer.find((string) => string !== null)) {\r\n        dispatch(addLine(buffer));\r\n        dispatch(setBuffer(Array(6).fill(null)));\r\n      }\r\n    }\r\n  });\r\n\r\n  return <></>;\r\n}\r\n","import { useSelector } from \"react-redux\";\r\nimport { selectBuffer, selectPreRows } from \"../ducks/data\";\r\nimport { strings } from \"../utils/strings\";\r\n\r\nexport default function Sections() {\r\n  const preRows = useSelector(selectPreRows);\r\n  const buffer = useSelector(selectBuffer);\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      <pre>{strings.join(\"\\n\")}</pre>\r\n      <pre>\r\n        {preRows.map((r, i) => (\r\n          <span key={i}>\r\n            {r}\r\n            <br />\r\n          </span>\r\n        ))}\r\n      </pre>\r\n      <pre style={{marginLeft: \"0.2em\", color: \"darkgreen\", fontWeight: \"bolder\"}}>\r\n          {buffer.join(\"\\n\")}\r\n      </pre>\r\n    </div>\r\n  );\r\n}\r\n","const style = { float: \"right\", width: \"20em\", textAlign: \"right\" };\r\nexport default function AppInfo() {\r\n  return (\r\n    <div style={style}>\r\n      This app is open source under{\" \"}\r\n      <a\r\n        href=\"https://github.com/gorankami/tabber/blob/main/LICENSE\"\r\n        target=\"_blank\" rel=\"noreferrer\"\r\n      >\r\n        MIT license\r\n      </a>\r\n      , and is hosted at{\" \"}\r\n      <a href=\"https://github.com/gorankami/tabber\" target=\"_blank\" rel=\"noreferrer\">\r\n        GitHub\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\n","import { useDispatch } from \"react-redux\";\r\nimport FretBoard from \"./FretBoard\";\r\nimport { KeyListener } from \"./KeyListener\";\r\nimport Sections from \"./Sections\";\r\nimport { undo } from \"../ducks/data\";\r\nimport AppInfo from \"./AppInfo\";\r\nexport default function Page() {\r\n  const dispatch = useDispatch();\r\n\r\n  function onUndo() {\r\n    dispatch(undo());\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <KeyListener />\r\n      <AppInfo />\r\n      <p>Click on a fret to add it to the tab</p>\r\n      <p>Hold SHIFT and click multiple strings to add a chord</p>\r\n      <p>Press BACKSPACE to remove last vertical array</p>\r\n      <FretBoard />\r\n      <button onClick={onUndo}>Backspace</button>\r\n      <Sections />\r\n    </>\r\n  );\r\n}\r\n","import { combineReducers } from \"redux\";\r\n\r\nimport data from \"./data\";\r\n\r\nconst rootReducer = combineReducers({\r\n  data,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore } from \"redux\";\r\n\r\nimport rootReducer from \"./rootReducer\";\r\n\r\nconst store = createStore(rootReducer);\r\n\r\nexport default store;\r\n","import Page from \"./components/Page\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./ducks/store\";\r\n\r\nexport default function App() {\r\n  return (\r\n    <Provider store={store}>\r\n      <Page />\r\n    </Provider>\r\n  );\r\n}\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}